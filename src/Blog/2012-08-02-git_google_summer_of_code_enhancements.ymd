--- 
kind: article
created_at: 2012-08-02T11:15:20+02:00
author: Mildred Ki'Lya
title: Git, Google Summer of Code enhancements
tags: 
- git
- dev
- en
- comp
publish: true
author_email: mildred@mildred.fr
message_id: 501A4528.6020700@mildred.fr
---

I was looking at Git, and which features may land in the next few 
releases, and I found the following things:

Git-SVN will be completely redesigned
-------------------------------------

If you worked with git-svn, you probably know that the git-svn workflow 
has nothing to do with git. Basically, you just have the svn history and 
have to use git-svn to push the changes back to the subversion 
repository. You can't use git-push and that's really annoying.

Recently, the [git-remote-helpers][git-remote-helpers] feature was 
added. It allows git to interact with any kind of remote url, using a 
specific `git-remote-*` command. For example, you can already use 
mercurial this way (according to [git-remote-hg][git-remote-hg]):

> Git allows pluggable remote repository protocols via helper scripts. If you have a script named "git-remote-XXX" then git will use it to interact with remote repositories whose URLs are of the form XXX::some-url-here. So you can imagine what a script named git-remote-hg will do.
>
> Yes, this script provides a remote repository implementation that communicates with mercurial. Install it and you can do:
>
>     $ git clone hg::https://hg.example.com/some-mercurial-repo
>     $ cd some-mercurial-repo
>     $ # hackety hackety hack
>     $ git commit -a
>     $ git push

The plan is to do the same with subversion. You could just do:

     $ git clone svn::http://svn.host.org/repo/trunk/

Branches might be tricky to implement, they might not be there. But you 
will get what's already in git-svn but with a way better UI. And far 
more possibilities for the future.

Here is the summary from the [GSoc][gsoc-svn] page:

> The submodule system of git is very powerful, yet not that easy to work with. This proposed work will strengthen the submodule system even more and improve the user experience when working with submodules.
>
> Git repository: https://github.com/iveqy/git
>
> Midterm evaluation: passed
 >
> Progress report / status:
>
>  *  [GSoC 11] submodule improvements at git mailing list
>  *  [GSoC 11 submodule] Status update at git mailing list
>  *  [RFC PATCH] Move git-dir for submodules at git mailing list

Submodules will be improved a lot
---------------------------------

I wish it was already there. From the [wiki page][gsoc-submod-wiki], the 
improvements will be:

> As Dscho put it, submodules are the “neglected ugly duckling” of git. Time to change that …
>
> Issues still to be tackled in this repo:
>
>  *  Let am, bisect, checkout, checkout-index, cherry-pick, merge, pull, read-tree, rebase, reset & stash work recursively on submodules (in progress)
>  *  Teach grep the --recursive option
>  *  Add means to specify which submodules shall be populated on clone
>  *  Showing that a submodule has a HEAD not on any branch in “git status”
>  *  gitk: Add popup menu for submodules to see the detailed history of changes
>  *  Teach “git prune” the “--recurse-submodules” option (and maybe honour the same default and options “git fetch” uses)
>  *  Better support for displaying merge conflicts of submodules
>  *  git gui: Add submodule menu for adding and fetching submodules
>  *  git status should call “git diff --submodule --ignore-submodules=dirty” instead of “git submodule summary” for providing a submodule summary when configured to do so.
>  *  **Add an “always-tip” mode**
>  *  Other commands that could benefit from a “--recurse-submodules” option: archive, branch, clean, commit, revert, tag.
>  *  In the long run git-submodule.sh should be converted to a rather simple wrapper script around core git functionality as more and more of that is implemented in the git core.
>
> Submodule related bugs to fix
>
>  *  Cherry picking across submodule creation fails even if the cherry pick doesn’t touch any file in the submodules path
>  *  git submodule add doesn’t record the url in .git/config when the submodule path doesn’t exist.
>  *  git rebase --continue won’t work if the commit only contains submodule changes.
>
> Issues already solved and merged into Junio’s Repo:
>
>  *  Since git 1.6.6:
>         New --submodule option to “git diff” (many thanks to Dscho for writing the core part!)
>         Display of submodule summaries instead of plain hashes in git gui and gitk
>  *  Since git 1.7.0:
>         “git status” and “git diff*” show submodules with untracked or modified files in their work tree as “dirty”
>         git gui: New popup menu for submodule diffs
>  *  Since git 1.7.1:
>         Show the reason why working directories of submodules are dirty (untracked content and/or modified content) in superproject
>  *  Since git 1.7.2:
>         Add parameters to the “--ignore-submodules” option for “git diff” and “git status” to control when a submodule is considered dirty
>  *  Since git 1.7.3:
>         Add the “ignore” config option for the default behaviour of “git diff” and “git status”. Both .git/config and .gitmodules are parsed for this option, the value set in .git/config. will override that from .gitmodules
>         Add a global config option to control when a submodule is considered dirty (written by Dscho)
>         Better support for merging of submodules (thanks to Heiko Voigt for writing that)
>  *  Since git 1.7.4:
>         Recursive fetching of submodules can be enabled via command line option or configuration.
>  *  Since git 1.7.5:
>         fetch runs recursively on submodules by default when new commits have been recorded for them in the superproject
>  *  Since git 1.7.7:
>         git push learned the --recurse-submodules=check option which errors out when trying to push a superproject commit where the submodule changes are not pushed (part of Frederik Gustafsson’s 2011 GSoC project)
>  *  Since git 1.7.8:
>         The “update” option learned the value “none” which disables “submodule init” and “submodule update”
>         The git directory of a newly cloned submodule is stored in the .git directory of the superproject, the submodules work tree contains only a gitfile. This is the first step towards recursive checkout, as it enables us to remove a submodule directory (part of Frederik Gustafsson’s 2011 GSoC project)

And the [GSoC page][gsoc-submod]:

> The submodule system of git is very powerful, yet not that easy to work with. This proposed work will strengthen the submodule system even more and improve the user experience when working with submodules.
>
> Git repository: https://github.com/iveqy/git
>
> Midterm evaluation: passed
>
> Progress report / status:
>
>  *  [GSoC 11] submodule improvements at git mailing list
>  *  [GSoC 11 submodule] Status update at git mailing list
>  *  [RFC PATCH] Move git-dir for submodules at git mailing list



[git-remote-helpers]: https://www.kernel.org/pub/software/scm/git/docs/git-remote-helpers.html
[git-remote-hg]: https://github.com/rfk/git-remote-hg
[gsoc-svn]: https://git.wiki.kernel.org/index.php/SoC2011Projects#Remote_helper_for_Subversion_and_git-svn
[gsoc-submod-wiki]: https://github.com/jlehmann/git-submod-enhancements/wiki/
[gsoc-submod]: https://git.wiki.kernel.org/index.php/SoC2011Projects#Git_submodule_improvements
