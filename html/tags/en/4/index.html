<!DOCTYPE html>
<html>
  <head>
    <title>Category: en - Mildred's Website</title>
    <meta charset='utf-8'>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta content='' name='keywords'>
    <meta content='' name='description'>
    <meta content='initial-scale=1.0, width=device-width' name='viewport'>
    <meta content='tag' name='x-kind'>
    <link href='http://mildred.fr/tags/en/4/' rel='canonical'>
    <link href='../../../favicon.png' rel='icon' type='image/png'>
    <link href='../../../favicon.png' rel='shortcut icon' type='image/png'>
    <link href='../../../style.css' media='screen' rel='stylesheet' type='text/css'>
    <link href='../atom.xml' rel='alternate' title='ATOM Feed' type='application/atom+xml'>
    <link href='../rss.xml' rel='alternate' title='RSS Feed' type='application/rss+xml'>
    <script src='../../../Scripts/json/json2.js' type='text/javascript'></script>
    <script src='../../../Scripts/jquery.min.js' type='text/javascript'></script>
    <script src='../../../Scripts/comments.js' type='text/javascript'></script>
    <script src='../../../Scripts/local.js' type='text/javascript'></script>
  </head>
  <body>
    <div class='header'>
      <p class='access-links'>
        <a href='#menu'>Go to Menu</a>
        <br>
        <a href='#content'>Go to Content</a>
      </p>
      <div class='left'>
        <a href='../../../'>
          <img alt='My photo' class='photo' src='../../../Images/IMG_5669_square_128.jpeg'>
        </a>
      </div>
      <div class='title'>
        <h1>
          <a href='../../../'>Mildred's Website</a>
        </h1>
      </div>
      <div class='float-right'></div>
      <div class='clear-right'></div>
      <div class='right'>
        <strong>Tags:</strong>
        <ul class='tags'>
          <li>
            <a class='tag' href='../../cobra/'>cobra</a>
          </li>
          <li>
            <a class='tag' href='../../comp/'>comp</a>
          </li>
          <li>
            <a class='tag' href='../../configuration/'>configuration</a>
          </li>
          <li>
            <a class='tag' href='../../dev/'>dev</a>
          </li>
          <li>
            <a class='tag' href='../../dream/'>dream</a>
          </li>
          <li>
            <a class='tag' href='../'>en</a>
          </li>
          <li>
            <a class='tag' href='../../fedora/'>fedora</a>
          </li>
          <li>
            <a class='tag' href='../../fr/'>fr</a>
          </li>
          <li>
            <a class='tag' href='../../freedombox/'>freedombox</a>
          </li>
          <li>
            <a class='tag' href='../../git/'>git</a>
          </li>
          <li>
            <a class='tag' href='../../html/'>html</a>
          </li>
          <li>
            <a class='tag' href='../../idea/'>idea</a>
          </li>
          <li>
            <a class='tag' href='../../liens/'>liens</a>
          </li>
          <li>
            <a class='tag' href='../../lisaac/'>lisaac</a>
          </li>
          <li>
            <a class='tag' href='../../lysaac/'>lysaac</a>
          </li>
          <li>
            <a class='tag' href='../../misc/'>misc</a>
          </li>
          <li>
            <a class='tag' href='../../photos/'>photos</a>
          </li>
          <li>
            <a class='tag' href='../../physics/'>physics</a>
          </li>
          <li>
            <a class='tag' href='../../politique/'>politique</a>
          </li>
          <li>
            <a class='tag' href='../../privacy/'>privacy</a>
          </li>
          <li>
            <a class='tag' href='../../srs/'>srs</a>
          </li>
          <li>
            <a class='tag' href='../../test/'>test</a>
          </li>
          <li>
            <a class='tag' href='../../web/'>web</a>
          </li>
          <li>
            <a class='tag' href='../../website/'>website</a>
          </li>
          <li>
            <a class='tag' href='../../wwwgen/'>wwwgen</a>
          </li>
          <li>
            <a class='tag' href='../../wwwsupport/'>wwwsupport</a>
          </li>
        </ul>
      </div>
      <div class='content'>
        <div class='links' id='menu'>
          <ul>
            <li>
              <a href='../../../'>Home</a>
            </li>
            <li>
              <a href='../../../Blog/'>Blog</a>
            </li>
            <li>
              <a href='//survie.mildred.fr'>Survie</a>
            </li>
          </ul>
        </div>
      </div>
      <div class='clear'></div>
    </div>
    <div class='leftcol'>
      <img alt='My avatar' class='photo' src='../../../Images/all128.jpeg'>
      <hr>
      <p>GoogleTalk, Jabber, XMPP address:
      <br /><strong><a href="xmpp:mildred&#64;jabber.fr">mildred&#64;jabber.fr</a></strong><!--&nbsp;<img src="http://presence.jabberfr.org/2dc519ffec76a836c2f2c2f66ac38291/image-dcraven.png" alt="" /><br /><em><script type="text/javascript" src="http://presence.jabberfr.org/2dc519ffec76a836c2f2c2f66ac38291/message_js.js"></script></em>-->
      </p>
      <hr>
      <p>
        <a href='../../../gpg_key.txt'>GPG Public Key</a>
        <br>
        <span style='font-size: 0.8em'>
          (Fingerprint 197C A7E6 645B 4299 6D37 684B 6F9D A8D6 9A7D 2E2B)
        </span>
      </p>
    </div>
    <div class='main' id='content'>
      <h1>Category: en</h1>
      <p>Articles from 31 to 40</p>
      <div class='article-list'>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/04/22/comments/'>Comments</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Fri 22 Apr 2011,</span>
    <span class='time'>02:13 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../website/'>website</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>It is now possible to add comments in my blog. Comments are purely in
javascript, and you need a recent browser (Firefox 3.5 minimum). This is because
I use a cross-domain XmlHttpRequest.</p>

<p>How does it work?</p>

<p>I have a php script somewhere that understand two methods:</p>

<ul>
<li><p><strong>GET</strong> will return all the posted objects associated with a tag passed as a
REQUEST_URI (the thing after the question mark in URL)</p></li>
<li><p><strong>POST</strong> will add an item to this series.</p></li>
</ul>


<p>All of this in JSON of course, using jQuery.</p>

<p>Now, feel free to comment :)</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/04/24/static_website_architecture/'>Static website architecture</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Sun 24 Apr 2011,</span>
    <span class='time'>09:13 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../website/'>website</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>This website is made of static pages. I see two good reasons for that: first,
there is no need to recompute endlessly the same information. Then, with static
pages, you can leave your web site online forever without having it defaced.</p>

<p>So, how to create a modern web site with that? First, I have to start with what
I want:</p>

<ul>
<li>A blog, with the recent posts on the front page</li>
<li>An atom feed with the recent posts as well</li>
<li>Older posts on other pages</li>
<li>Each posts categorized in tags</li>
<li>Each tag having a page with posts in it</li>
<li>The tags pages must have atom feeds as well</li>
<li>And tag pages must be splitted in pages</li>
<li>Posts can have comments, anyone can add a comment</li>
</ul>


<p>This can be achieved using an off-line compiler that creates a hierarchy of HTML
files. Many of these compilers exists, I choose <a href="http://nanoc.stoneship.org">nanoc</a>,
but I had to customize it, mostly using <a href="http://github.com/mgutz/nanoc3_blog">nanoc3_blog</a>.</p>

<p>Some features can be easily provided:</p>

<ul>
<li>The atom feed can be created using a helper included in nanoc</li>
<li>The tags can be easily crafted using page attributes.</li>
<li>Tag pages can be created on the fly using a hand-made helper</li>
<li>Pagination can be done the same way</li>
</ul>


<p>Now, a word about design:</p>

<p><strong>Pagination,</strong> this is frowned upon by the nanoc author as demonstrated on the
<a href="http://nanoc.stoneship.org/docs/6-guides/#paginating-articles">guide</a>:</p>

<blockquote><p>First, a word of caution: I am not a fan of paginating items. Even though
pagination is fairly easy to do in nanoc, I recommend not doing it, for one
specific reason. Every time an object is added to a paginated collection, one
object shifts from one page to the next. When a paginated page is bookmarked,
it may show entirely different content a month later, and when a paginated
page turns up as a result on a search engine, it may no longer contain the
content that the person was looking for anymore. To avoid these issues, I
recommend creating separate pages for each category, tag or year. Having said
all this, Iâ€™ll nonetheless show you how to do pagination in nanoc, so you can
get an idea of how it can be done.</p></blockquote>

<p>In order to avoid having the object shifting pages, the most simple solution is
to have the pages remain static. Say you want to have 10 items per page, the
first page starts empty until it has 10 items. When an 11th item is added, a
second page is created with one element. For blogs, it might seem to be in
reverse order, but for archives, this is not a bad solution.</p>

<p>The pagination system must be uniform and available for any page on the website.
This way, the index page and tag page can have the same pagination system. The
pagination system must also support creating atom feeds. This way, we can have
a feed for the whole blog and a feed per tag. In nanoc, this can be done using
alternative representations for an item.</p>

<p><strong>Comments,</strong> can be done using JavaScript. For a first solution, this is
acceptable, even though having a solution working with user agents without
javascript is a goal. For this, we can use jQuery and XmlHttpRequest. Because
the server only provides static pages, XmlHttpRequest, having a same-origin
policy, will refuse to work. There are several solutions:</p>

<ul>
<li>Proxy the foreign resource on the local server. This unfortunately requires
<code>mod_proxy</code> which is not available on my server.</li>
<li>Another solution is to use <a href="http://www.w3.org/TR/cors/">Cross Origin Resource Sharing</a>, a W3C
recommendation that is still a draft unfortunately, but is started to be
implemented.</li>
<li>Or to use an iframe with a page of the foreign server, and use the
postMessage method to communicate with it, for example with the
<a href="https://github.com/oyvindkinsey/easyXDM/">easyXDM</a> library.</li>
<li>Or use HTML <code>&lt;form&gt;</code> element to post the comment on the the API server. The
server would then include the comment on the static page and publish it.
This unfortunately requires a server with more than a simple php scripting
ability. I don't have this.</li>
</ul>


<p>For now, I am using the XmlHttpRequest solution with the CORS mechanism on the
API server to allow communication. Here is where I'd like to move:</p>

<ul>
<li>First, integrate <a href="https://github.com/oyvindkinsey/easyXDM/">easyXDM</a> for wider browser compatibility, at the
cost of the design.</li>
<li>Then, use a variation of the static HTML form.</li>
</ul>


<p>For the static form, here is what i'm thinking of:</p>

<ul>
<li>First, the client can POST the form on the PAI server. If XmlHttpRequest
with CORS is available, this can be done using Ajax, else we have to deal
with a page reload.</li>
<li>The server would store this message on the database with a unique UUID.</li>
<li>Other clients can access this message accessing the API server as usual.</li>
<li>Frequently, on my computer, I would dump the messages on the API server
database and put them in a local yaml file. Comments i'd like to remove can
then be removed here.</li>
<li>When the site is regenerated, a nanoc helper would read this yaml file and
put comments statically in the page. The page would then be published and
comments would be available to users without javascript.</li>
<li>The script that fetches comments would ignore received comments that are
already present statically on the page, based on the UUID.</li>
</ul>


<p>This way, comments would be available for everyone.</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/04/29/lysaac_compilation_model_and_inline_prototypes/'>Lysaac compilation model and inline prototypes</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Fri 29 Apr 2011,</span>
    <span class='time'>09:19 AM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../dev/'>dev</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lisaac/'>lisaac</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lysaac/'>lysaac</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>In Lysaac, I choose to follow the open world assumption, like the majority of
programming languages out there, instead of the closed world assumption. There
are two main reasons:</p>

<ul>
<li><p>First, I don't strive at creating an optimizing compiler, not yet at least.
Closed world is useful for that, but I don't need it.</p></li>
<li><p>Second, open world assumption increases the complexity a lot. The Lisaac
compiler uses an exponential algorithm, and will always hit a limit with
big projects. With an open world, you can partition the complexity.</p></li>
</ul>


<p>Because I still believe in global compilation, I decided that my compilation
unit would be the cluster instead of the prototype. That is, I'll compile a
cluster completely in one object file. That makes it possible to optimize things
like private prototypes.</p>

<p>This leaves a big performance problem for <code>BOOLEAN</code>s in particular. <code>BOOLEAN</code>,
<code>TRUE</code> and <code>FALSE</code> are prototypes in the standard library, and having an open
world assumption would require pasing to the <code>if then</code> slot function pointers.
I can't realisticly do that.</p>

<p>So, These prototypes could be marked as <code>Inline</code>. They are separated from their
cluster and gets compiled in every cluster that uses them. The syntax could be
quite simple:</p>

<pre><code>Section Header&#x000A;&#x000A;  + name := Inline TRUE;&#x000A;</code></pre>

<p>But, because each cluster is then free to compile it as it wants, there is a
problem of interoperability. How can you be sure that the <code>TRUE</code> in your cluster
is compiled the same way as in the neighbooring cluster you are using. As it is,
you can't pass <code>TRUE</code> object around clusters. Very annoying.</p>

<p>The solution would be to encode them and decode them manually. You could have:</p>

<pre><code>Section Header&#x000A;&#x000A;  + name := Inline TRUE;&#x000A;&#x000A;Section Feature&#x000A;&#x000A;  - inline_size :INTEGER := 0;&#x000A;</code></pre>

<p>Take a more interesting example:</p>

<pre><code>Section Header&#x000A;&#x000A;  + name := Inline Expanded BIT;&#x000A;&#x000A;  - size := 1;&#x000A;&#x000A;Section Feature&#x000A;&#x000A;  - inline_size :INTEGER := 1;&#x000A;  - encode p:POINTER &lt;-&#x000A;  (&#x000A;    p.to_native_array_of BIT.put bit to 0;&#x000A;  );&#x000A;  - decode p:POINTER &lt;-&#x000A;  (&#x000A;    data := p.to_native_array_of BIT.item 0;&#x000A;  );&#x000A;</code></pre>

<p>This needs to be refined.</p>

<p>Additionally, <code>.cli</code> files could also contain the <code>Inline</code> keyword. In that
case, the cluster it reference will be compiled with the current cluster. That
could be useful for private clusters.</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/04/29/lysaac_annotations/'>Lysaac annotations</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Fri 29 Apr 2011,</span>
    <span class='time'>09:40 AM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../dev/'>dev</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lisaac/'>lisaac</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lysaac/'>lysaac</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>Because I'm using an open world assumption, I need the compiler to generate
annotations on units it compiles, so when it sees them again, it knows what it
does (or does not) internally.</p>

<p>I was looking at <a href="http://www.youtube.com/watch?v=ryfw9_-Hnb0">a LLVM video</a> this morning (VMKit precisely) and the
person talked about an interesting optimization. What if we could allocate
objects in stack instead of the heap. This would save time when creating the
object. Then we wouldn't be tempted to avoid creating new objects for fear of
memory leaks (there is not garbage collector in lisaac currently) and
performance penalty.</p>

<p>This is the same thing as aliased variables in Ada.</p>

<p>An object can be allocated on the stack if:</p>

<ul>
<li>it is not returned by the function.</li>
<li>it is not stored on the heap by the function.</li>
<li>it is not used in a called function that would store a pointer to this
object on the heap.</li>
</ul>


<p>So, when the compiler compiles a cluster, it has to generate an annotation file
containing for each argument in each code slot whether the argument is
guaranteed to remain on the stack or if it might be stored on the heap. If an
argument is guaranteed to stay on the stack, we can allocate it on the stack.
When the function will return, the only instances would be located in the
current stack frame.</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/04/29/stack_environments/'>Stack environments</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Fri 29 Apr 2011,</span>
    <span class='time'>09:52 AM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../dev/'>dev</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lisaac/'>lisaac</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lysaac/'>lysaac</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>Stack environment would be an argument passed implicitely to every function in
the code. It would contain global policy. In particular the <code>MEMORY</code> object that
lets you allocate memory. If you want to change the allocation policy, you just
have to change the current environment, and all functions you call will use the
new policy.</p>

<p>We could allow user defined objects like that, not just system objects.</p>

<p>We could also manage errors that way. An error flag could be stored in the
environment. Set by the calee and tested by the caller.</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/05/02/lysaac_now_compiles_hello_world/'>Lysaac now compiles Hello World!</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Mon 02 May 2011,</span>
    <span class='time'>12:04 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../dev/'>dev</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lisaac/'>lisaac</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lysaac/'>lysaac</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>This is great: Here is the source files:</p>

<p><code>c/cstring.li</code></p>

<pre><code>Section Header&#x000A;&#x000A;  + name := Reference CSTRING;&#x000A;&#x000A;  - role := String; // const char*&#x000A;  - type := Integer 8;&#x000A;</code></pre>

<p><code>c/main.li</code></p>

<pre><code>Section Header&#x000A;&#x000A;  + name := MAIN;&#x000A;&#x000A;Section Public&#x000A;&#x000A;  - puts str:CSTRING &lt;- External `puts`;&#x000A;&#x000A;  - main &lt;-&#x000A;  (&#x000A;    puts "Hello World";&#x000A;  );&#x000A;</code></pre>

<p>You type <code>lysaac compile c &gt;c.bc</code> and you get the following LLVM assembly code:</p>

<p><code>c.bc</code></p>

<pre><code>@0 = private constant [12 x i8] c"Hello World\00"&#x000A;&#x000A;&#x000A;declare void @puts (i8*)&#x000A;&#x000A;define void @main () {&#x000A;  %1 = getelementptr [12 x i8]* @0, i32 0, i32 0&#x000A;  tail call void @puts(i8* %1)&#x000A;  ret void&#x000A;}&#x000A;</code></pre>

<p>And you can execute it using the standard LLVM tools:</p>

<pre><code>$ llvm-as &lt; c.bc | lli&#x000A;Hello World&#x000A;$&#x000A;</code></pre>

<p>Isn't that great ?</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/05/09/hmp_http_message_protocol/'>HMP: HTTP Message Protocol (0.1)</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Mon 09 May 2011,</span>
    <span class='time'>02:40 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../dev/'>dev</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <h2>FAQ</h2>

<ul>
<li><p><strong>What is HMP:</strong> It is a messaging protocol destined to replace e-mails.</p></li>
<li><p><strong>Why replace e-mails:</strong> Because it is full of spam and unmaintainable. This
alternative is lighter and easier to implement than a full SMTP server with
SPAM management.</p></li>
<li><p><strong>Why use HTTP:</strong> I'm not fan of putting everything over HTTP but it has its
advantages:</p>

<ul>
<li>It has a security layer (HTTPS)</li>
<li>It is (relatively) simple and implemented everywhere</li>
<li>It manages content-types and different types of requests</li>
<li>It is extensible</li>
<li>It goes easily through proxys and NATs</li>
<li>It allows multiplexing many different resources on the same server</li>
</ul>


<p>In the long run, perhaps we should move away from HTTP as:</p>

<ul>
<li>It is too associated with the web</li>
<li>It doesn't allow initiative from the server.</li>
</ul>


<p>WebSockets could be a good alternative one day.</p></li>
<li><p><strong>How do I get my messages:</strong> Not specified, although you could possibly
authenticate using a standard HTTP method to the same resource as your
address and issue a GET command.</p></li>
<li><p><strong>Does this allows a web implementation:</strong> Yes, it will need to be further
specified but if the server detects a browser request (without the HMP
headers) on the resource, it could issue a web-page with a form.</p></li>
<li><p><strong>Is the message format specified</strong>: no, it needs to be. I plan on using
JSON.</p></li>
<li><p><strong>Do you plan an implementation:</strong> Yes, using probably node.js or Lua.</p></li>
<li><p><strong>What prompted this:</strong> The Tor network doesn't have any standard messaging
system. I don't believe SMTP is suited for that.</p></li>
<li><p><strong>Why write this spec, you have no code to back this up:</strong> because I like
writing specs, and it's a way for me to remind me to write the code, and to
tell me how I should write it. I might not get the time to write this as
soon as I want.</p></li>
</ul>


<h2>What is a hmp address</h2>

<p>Scheme:</p>

<pre><code>[hmp:]server[:port][/path]&#x000A;</code></pre>

<p>Example:</p>

<pre><code>hmp:gmail.com:80/user&#x000A;gmail.com:80/user&#x000A;gmail.com/user&#x000A;&#x000A;domain.org/u/alicia&#x000A;</code></pre>

<h2>Translation to HTTPS resources</h2>

<p>A HMP address can directly be translated to an HTTPS resource. The standard
scheme translates to:</p>

<pre><code>https://server:port/path&#x000A;</code></pre>

<h2>Message sending overview</h2>

<p>To send a message from <code>domain.org/alicia</code> to <code>users.net/~bob</code>, the sequence is:</p>

<ul>
<li><p>Connection to users.net:</p>

<pre><code>[1] POST https://users.net/~bob&#x000A;[1] HMP-Pingback: 235&#x000A;[1] HMP-From: domain.org/alicia&#x000A;[1] Content: message-content&#x000A;</code></pre></li>
<li><p>users.net opens a connection to domain.org</p>

<pre><code>[2] GET https://domain.org/alicia&#x000A;[2] HMP-Pingback: 235&#x000A;[2] HMP-Method: MD5&#x000A;</code></pre></li>
<li><p>domain.org responds to users.net</p>

<pre><code>[2] HMP-Hash: ef0167eca19bb2d4c8dfe4c3803cc204&#x000A;[2] Status: 200&#x000A;</code></pre></li>
<li><p>users.net responds to the original sender</p>

<pre><code>[1] Status: 200&#x000A;</code></pre></li>
</ul>


<h2>Headers to the POST request</h2>

<p>The POST request is the request used to post a message. It contains two specific
headers:</p>

<ul>
<li><p>HMP-From: The address the message is sent from</p></li>
<li><p>HMP-Pingback: A sequence number that uniquely identifies the message for the
sender. it needs not be unique, as long as at ont point in time, there are
only one message corresponding to this ID.</p></li>
</ul>


<p>Particular status codes:</p>

<ul>
<li><p>200 in case of success</p></li>
<li><p>403 in case the From address could not be authenticated</p></li>
</ul>


<h2>From address authentication, pingpack</h2>

<p>In order to avoid SPAM, the sender must be authenticated when the message is
sent. For this reason, before accepting or rejecting the request, the server
must initiate a pingback procedure to the sender.</p>

<p>First, the From address is converted to an HTTPS resource and a GET connection
is initiated. The specific request-headers are:</p>

<ul>
<li><p>HMP-Pingback: the pingback sequence number from the previous request</p></li>
<li><p>HMP-Method: method for verifying the originating message. The only specified
method is "MD5"</p></li>
</ul>


<h3>MD5 Method</h3>

<p>In case the message is recognized, the from server responds with the following
header:</p>

<ul>
<li>HMP-Hash: MD5 hash of the content of the message identified by the pingback
identifier</li>
</ul>


<p>The status code can be:</p>

<ul>
<li><p>200 in case the message was recognized</p></li>
<li><p>404 in case the message was not found</p></li>
</ul>


<p>If the MD5 sum corresponds to the message received and a success code was given,
the from is verified and the message can be sent.</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/06/28/home_directory_package_manager/'>Home directory package manager</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Tue 28 Jun 2011,</span>
    <span class='time'>12:17 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../configuration/'>configuration</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../misc/'>misc</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>I always wanted to manage the files in my home directory. Generally, it's a
complete mess and I wanted to get things right and understand the files I had.</p>

<p>At first, I just created a simple shell script that maintained symbolic links of
the dotfiles and dordirs of my homedirs to <code>.local/config</code>, sort of early XDG
configuration directory. I also changed my .bashrc and later .zshrc to point to
files in <code>.local/etc/profile.d</code>. The shell script was reading a database in
<code>.local/config/database.sh</code> that contained the link information in the form.</p>

<p>The script did the following for each file declared:</p>

<ul>
<li>if the file existed in the homedir but not in the database directory, it was
simply moved and a link was created in its place.</li>
<li>if the file existed at both places, tell there is a conflict.</li>
<li>if the file existed in the database directory but not in the homedir, create
the link</li>
</ul>


<p>The database looks like:</p>

<pre><code>link ".bashrc" "bashrc"&#x000A;link ".zshrc"  "zshrc"&#x000A;&#x000A;# First file in home directory&#x000A;# Second file in .local/config&#x000A;</code></pre>

<p>My script just defined a function <code>link</code> and sourced the database. But links
were not easy to construct in shell. So later, I decided to rewrite it in Tcl,
simply because the syntax is compatible (I love the Tcl syntax for that) and
because of the wonderful <a href="http://www.tcl.tk/man/tcl8.5/TclCmd/file.htm">file</a> command.</p>

<p>Later, I improved the script that was then called <code>fixdir</code> to list which files
were not managed, and display them. So I could either delete those files
(because I don't care about them) or integrate them in the database. The script
gained a <code>clean</code> command to automatically remove files declared as noisy.</p>

<p>Now, I have a slightly different problem. I have now different computers which
do not have all the same configuration. At first, I synchronized everything and
just used the hostname in the database to get different links depending on the
machine. But now, with my computer at work, I will not synchronize all the
personal configurations. i have to get to a modular approach.</p>

<p>And this script did not help me in tracking what programs I installed in
<code>~/.local/{bin,share,lib}</code>. For this, I wanted something like <a href="http://www.gnu.org/software/stow/">stow</a>. I
tried using stow, but it failed with a conflict. Then I tried using
<a href="https://github.com/docwhat/homedir">homedir</a>. I just didn't like it because it created an ugly <code>~/bin</code>
instead of <code>~/.local/bin</code>.</p>

<p>Then I realized my <code>fixdir</code> script looks much like <code>homedir</code> already, and I
patched it up to make it better. And there it is.</p>

<p><a href="https://github.com/mildred/fixdir">The current version of fixdir is on github.</a></p>

<p>Let me copy the README file:</p>

<h2>What is it?</h2>

<p>This is my homedir package manager. Written first in shell then translated in
tcl. Originally, this was just to maintain a set of symbolic links from my home
directory to a directory where all important comfig files were stored. Then I
decided to make it a package manager.</p>

<h2>How to install it?</h2>

<pre><code>git clone git://github.com/mildred/fixdir.git fixdir&#x000A;fixdir_dir="$(pwd)/fixdir"&#x000A;cd&#x000A;"$fixdir_dir/fixdir" install "$fixdir_dir/hpkg.tcl"&#x000A;</code></pre>

<p><code>fixdir</code> is installed in <code>~/.local/bin</code>. Make sure it is in your <code>$PATH</code>.</p>

<h2>How does it work</h2>

<p><code>fixdir</code> works better when you are in your target directory (homedir)</p>

<p>Invoke one action with a database file. The database file is a tcl script that
contain all files and directories that should be linked.</p>

<h2>What else can it do?</h2>

<p><code>fixdir unknown</code> list all files not manages by fixdir in the current directory</p>

<p><code>fixdir clean</code> remove files declared as noisy</p>

<h2>Bugs</h2>

<ul>
<li>fixdir list doesn't work when pwd != target directory</li>
</ul>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/06/28/lysaac_not_talking_about_it_but_goes_forward/'>Lysaac: not talking about it but it goes forward</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Tue 28 Jun 2011,</span>
    <span class='time'>12:51 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lisaac/'>lisaac</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../lysaac/'>lysaac</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../misc/'>misc</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p><a href="https://github.com/mildred/Lysaac">Lysaac</a> is my reimplementation of the <a href="http://lisaac-users.org">lisaac</a>
compiler. Until now, it wasn't very interesting to look at, but recently, I
pushed a few interesting commits:</p>

<ul>
<li>you now have variables

<ul>
<li>the default value is initialized correctly</li>
<li>the read works</li>
<li>the write works</li>
</ul>
</li>
<li>you also have BLOCKs (sorry, no upvalues for now)</li>
</ul>


<p>This may looks like nothing, but under the hood, the infrastructure is almost
completely there.</p>

<p>Next thing to come: inheritance and error reporting.</p>

<p>Then perhaps, syntax improvements like keyword messages and later: operators.
For now, I want the basic functionnality working well.</p>

<p>If you want to play with it, you can. If you get an error, create a use-case and
propose it as a new feature. Please use as a model <a href="https://github.com/mildred/Lysaac/blob/master/features/type/struct.feature">the <code>.feature</code> files</a>.</p>
</div></div>
          <div class='clear'></div>
        </div>
        <div class='sub-article'>
          <h2>
            <a class='permalink' href='../../../Blog/2011/08/05/html_2_0/'>HTML 2.0: Why I think HTML is broken</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Fri 05 Aug 2011,</span>
    <span class='time'>10:35 AM</span>
  </span>
  <span class='author'>
    by
    <span class='author-name'>
      Shanti
    </span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class='tag' href='../../comp/'>comp</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../'>en</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../html/'>html</a>
    </span>
    <span class='tag'>
      <a class='tag' href='../../web/'>web</a>
    </span>
  </span>
</p>
<div class='excerpt'>
  <p>First postulate: HTML was designed as a stateless protocol</p>

<p>Context: web sites need to maintain a context (or state) to track the client.
This is required by the log-in procedures the various websites have. It is also
useful to track the user in a web store, to know which items the user wants to
buy. In fact, it is requires almost everywhere.</p>

<p>The first solution to be thrown out for this problem are the cookies. People
didn't like cookies but now, everyone accepts them. Nothing works without
cookies. Why did people dislike cookies back then? They liked their provacy and
cookies makes it possible to track the user. Through advertisement networks, the
advertiser known exactly which website the user visited. And it is still the
case now. What changed is that the users got tried to fight cookies and have
every website break, and they got used to it.</p>

<p><strong>People got used to being tracked</strong> just as people are used to be watched by
video cameras in the street and people are used to get tracked by the government
and big companies and banks.</p>

<p>Cookies are a great way to track prople, all because HTTP didn't include session
management. The way Google track you is very simple. Google Analytics puts a
cookie on your computer and each time you access the Google Server, they know
it's the same person. Google is everywhere:</p>

<ul>
<li>Many web sites are using Google APIs, or the jQuery library at Google.</li>
<li>Many web sites ask Google to track their users to know how many prople visit
their page.</li>
<li>Google makes advertisement.</li>
<li>Youtube, Blogger, Picasa and others are owned by Google</li>
</ul>


<p>With this alone, Google is found on almost every page. If you have an account at
Google (YouTube, Picase, Gmail, Blogger, Android or other), they can even give a
name or an e-mail address to all of these information.</p>

<p>Google motto is <em>Don't be Evil</em>, they are perhaps not evil but can they become
evil? Yes.</p>

<p>Whatever, my dream HTTP 2.0 protocol would include of course push support like
WebSockets, but more importantly: session management. How should this be done?</p>

<h3>HTTP and Session Management</h3>

<p><strong>When the server needs a session, it initiates the session by giving a session
token to the client.</strong> The client needs to protect this token from being stolen
and should display that a session is in pogress for this website. It could
appear on the URL bar for example. The client could close the session at any
moment.</p>

<p>With the token, the server provides its validity scope. Domains, subdomains,
path. Only the resources in the session scope will receive the tocken back. If
for example <code>http://example.com</code> starts a session at <code>example.com</code> but have an
<code>&lt;iframe&gt;</code> that includes facebook. Facebook won't receive the session token. If
Facebook wants to start a session (because the user wants to log-in) it will
start a second session.</p>

<p>Session cannot escape the page. If you have two tabs open with facebook in each
tab (either full page or embedded), the two facebook instances don't share the
same session, unless the user explicitely allowed this. For instance, when
Facebook starts a session, the browser could tell the user that Facebook already
have an existing session and the user would be free to choose between the new
session and the existing one.</p>

<h3>How does this solve XSS</h3>

<p>XSS is when a website you don't trust access the session of a website you trust,
and steal it. At least I think so.</p>

<p>With this kind of session management, the session couldn't possibly be stolen.
Suppose that the non-trusted site makes an XmlHttpRequest to gmail.com. If
cross-domain wasn't forbidden, any web-site could read your mails.</p>

<p>With the new session management, if the untrusted site makes a request to
gmail.com, gmail.com session wouldn't be available and the login page would be
returned instead of the list of e-mails. If the non trusted website tries to
log-in, you would be prompted to associate the Gmail session with the site you
don't trust. If you aren't completely idion, you wouldn't allow the online
pharmacy to connect to Gmail.</p>

<h3>Extra</h3>

<p><strong>What is known about you?</strong> Let's take an average person that uses her credit
card, have and Android phone with Gmail, uses Facebook:</p>

<ul>
<li>All your relationships are known by Google (Gmail, Google+) and Facebook</li>
<li>All your interests are known by Google and Facebook (Ad Sense track which
website you visit and Facebook have a huge profile on you)</li>
<li>All your posessions are known to your bank</li>
<li>Your photograph is known by Google and Facebook (people probably took a
photo of you and placed it on their Android phone synchronized with Google)</li>
<li>Your location is known (using your Android phone, your credit card, or your
RFID card you use for public transportation)</li>
<li>...</li>
</ul>


<p>If you ever want to keep private, it is becoming very difficult.</p>
</div></div>
          <div class='clear'></div>
        </div>
      </div>
      <div class='page-list'>
        <strong>Page:</strong>
        <ul class='page-list'>
          <li>
            <a href='../1/'>1</a>
          </li>
          <li>
            <a href='../2/'>2</a>
          </li>
          <li>
            <a href='../3/'>3</a>
          </li>
          <li>
            <strong>4</strong>
          </li>
          <li>
            <a href='../5/'>5</a>
          </li>
          <li>
            <a href='../'>latest</a>
          </li>
        </ul>
      </div>
      <div class='clear'></div>
    </div>
    <div class='clear'></div>
<include-file src="../../../footer.html" />
  </body>
</html>
