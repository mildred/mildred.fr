<!DOCTYPE html>
<html>
  <head>
    <title>Category: lisaac - Mildred's Website</title>
    <meta charset='utf-8' />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='' name='keywords' />
    <meta content='' name='description' />
    <meta content='initial-scale=1.0, width=device-width' name='viewport' />
    <meta content='tag' name='x-kind' />
    <link href='http://mildred.fr/tags/lisaac/2/' rel='canonical' />
    <link href='../../../favicon.png' rel='icon' type='image/png' />
    <link href='../../../favicon.png' rel='shortcut icon' type='image/png' />
    <link href='../../../style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='../atom.xml' rel='alternate' title='ATOM Feed' type='application/atom+xml' />
    <link href='../rss.xml' rel='alternate' title='RSS Feed' type='application/rss+xml' />
    <script src='../../../Scripts/json/json2.js' type='text/javascript'></script>
    <script src='../../../Scripts/jquery.min.js' type='text/javascript'></script>
    <script src='../../../Scripts/comments.js' type='text/javascript'></script>
    <script src='../../../Scripts/local.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="header">
      <p class="access-links">
        <a href="#menu">Go to Menu</a>
        <br />
        <a href="#content">Go to Content</a>
      </p>
      <div class="left">
        <a href="../../../index.html">
          <img alt="My photo" class="photo" src="../../../Images/IMG_5669_square_128.jpeg"/>
        </a>
      </div>
      <div class="title">
        <h1>
          <a href="../../../index.html">Mildred's Website</a>
        </h1>
      </div>
      <div class="float-right"></div>
      <div class="clear-right"></div>
      <div class="right">
        <strong>Tags:</strong>
        <ul class="tags">
          <li>
            <a class="tag" href="../../cobra/index.html">cobra</a>
          </li>
          <li>
            <a class="tag" href="../../comp/index.html">comp</a>
          </li>
          <li>
            <a class="tag" href="../../configuration/index.html">configuration</a>
          </li>
          <li>
            <a class="tag" href="../../dev/index.html">dev</a>
          </li>
          <li>
            <a class="tag" href="../../dream/index.html">dream</a>
          </li>
          <li>
            <a class="tag" href="../../en/index.html">en</a>
          </li>
          <li>
            <a class="tag" href="../../fedora/index.html">fedora</a>
          </li>
          <li>
            <a class="tag" href="../../fr/index.html">fr</a>
          </li>
          <li>
            <a class="tag" href="../../freedombox/index.html">freedombox</a>
          </li>
          <li>
            <a class="tag" href="../../git/index.html">git</a>
          </li>
          <li>
            <a class="tag" href="../../html/index.html">html</a>
          </li>
          <li>
            <a class="tag" href="../../idea/index.html">idea</a>
          </li>
          <li>
            <a class="tag" href="../../liens/index.html">liens</a>
          </li>
          <li>
            <a class="tag" href="../index.html">lisaac</a>
          </li>
          <li>
            <a class="tag" href="../../lysaac/index.html">lysaac</a>
          </li>
          <li>
            <a class="tag" href="../../misc/index.html">misc</a>
          </li>
          <li>
            <a class="tag" href="../../photos/index.html">photos</a>
          </li>
          <li>
            <a class="tag" href="../../physics/index.html">physics</a>
          </li>
          <li>
            <a class="tag" href="../../politique/index.html">politique</a>
          </li>
          <li>
            <a class="tag" href="../../privacy/index.html">privacy</a>
          </li>
          <li>
            <a class="tag" href="../../srs/index.html">srs</a>
          </li>
          <li>
            <a class="tag" href="../../test/index.html">test</a>
          </li>
          <li>
            <a class="tag" href="../../web/index.html">web</a>
          </li>
          <li>
            <a class="tag" href="../../website/index.html">website</a>
          </li>
          <li>
            <a class="tag" href="../../wwwgen/index.html">wwwgen</a>
          </li>
          <li>
            <a class="tag" href="../../wwwsupport/index.html">wwwsupport</a>
          </li>
        </ul>
      </div>
      <div class="content">
        <div class="links" id="menu">
          <ul>
            <li>
              <a href="../../../index.html">Home</a>
            </li>
            <li>
              <a href="../../../Blog/index.html">Blog</a>
            </li>
            <li>
              <a href="//survie.mildred.fr">Survie</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="leftcol">
      <img alt="My avatar" class="photo" src="../../../Images/all128.jpeg"/>
      <hr/>
      <p>GoogleTalk, Jabber, XMPP address:
      <br /><strong><a href="xmpp:mildred&#64;jabber.fr">mildred&#64;jabber.fr</a></strong><!--&nbsp;<img src="http://presence.jabberfr.org/2dc519ffec76a836c2f2c2f66ac38291/image-dcraven.png" alt=""/><br /><em><script type="text/javascript" src="http://presence.jabberfr.org/2dc519ffec76a836c2f2c2f66ac38291/message_js.js"></script></em>-->
      </p>
      <hr/>
      <p>
        <a href="../../../gpg_key.txt">GPG Public Key</a>
        <br />
        <span style="font-size: 0.8em">
          (Fingerprint 197C A7E6 645B 4299 6D37 684B 6F9D A8D6 9A7D 2E2B)
        </span>
      </p>
    </div>
    <div class='main' id='content'>
      <h1>Category: lisaac</h1>
      <p>Articles from 11 to 14</p>
      <div class="article-list">
        <div class="sub-article">
          <h2>
            <a class="permalink" href="../../../Blog/2011/05/02/lysaac_now_compiles_hello_world/index.html">Lysaac now compiles Hello World!</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Mon 02 May 2011,</span>
    <span class='time'>12:04 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../../comp/index.html">comp</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../dev/index.html">dev</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../en/index.html">en</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../index.html">lisaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../lysaac/index.html">lysaac</a>
    </span>
  </span>
</p>
<div class="excerpt">
  <p>This is great: Here is the source files:</p>

<p><code>c/cstring.li</code></p>

<pre><code>Section Header&#x000A;&#x000A;  + name := Reference CSTRING;&#x000A;&#x000A;  - role := String; // const char*&#x000A;  - type := Integer 8;&#x000A;</code></pre>

<p><code>c/main.li</code></p>

<pre><code>Section Header&#x000A;&#x000A;  + name := MAIN;&#x000A;&#x000A;Section Public&#x000A;&#x000A;  - puts str:CSTRING &lt;- External `puts`;&#x000A;&#x000A;  - main &lt;-&#x000A;  (&#x000A;    puts "Hello World";&#x000A;  );&#x000A;</code></pre>

<p>You type <code>lysaac compile c &gt;c.bc</code> and you get the following LLVM assembly code:</p>

<p><code>c.bc</code></p>

<pre><code>@0 = private constant [12 x i8] c"Hello World\00"&#x000A;&#x000A;&#x000A;declare void @puts (i8*)&#x000A;&#x000A;define void @main () {&#x000A;  %1 = getelementptr [12 x i8]* @0, i32 0, i32 0&#x000A;  tail call void @puts(i8* %1)&#x000A;  ret void&#x000A;}&#x000A;</code></pre>

<p>And you can execute it using the standard LLVM tools:</p>

<pre><code>$ llvm-as &lt; c.bc | lli&#x000A;Hello World&#x000A;$&#x000A;</code></pre>

<p>Isn't that great ?</p>
</div></div>
          <div class="clear"></div>
        </div>
        <div class="sub-article">
          <h2>
            <a class="permalink" href="../../../Blog/2011/06/28/lysaac_not_talking_about_it_but_goes_forward/index.html">Lysaac: not talking about it but it goes forward</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Tue 28 Jun 2011,</span>
    <span class='time'>12:51 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../../comp/index.html">comp</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../en/index.html">en</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../index.html">lisaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../lysaac/index.html">lysaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../misc/index.html">misc</a>
    </span>
  </span>
</p>
<div class="excerpt">
  <p><a href="https://github.com/mildred/Lysaac">Lysaac</a> is my reimplementation of the <a href="http://lisaac-users.org">lisaac</a>
compiler. Until now, it wasn't very interesting to look at, but recently, I
pushed a few interesting commits:</p>

<ul>
<li>you now have variables

<ul>
<li>the default value is initialized correctly</li>
<li>the read works</li>
<li>the write works</li>
</ul>
</li>
<li>you also have BLOCKs (sorry, no upvalues for now)</li>
</ul>


<p>This may looks like nothing, but under the hood, the infrastructure is almost
completely there.</p>

<p>Next thing to come: inheritance and error reporting.</p>

<p>Then perhaps, syntax improvements like keyword messages and later: operators.
For now, I want the basic functionnality working well.</p>

<p>If you want to play with it, you can. If you get an error, create a use-case and
propose it as a new feature. Please use as a model <a href="https://github.com/mildred/Lysaac/blob/master/features/type/struct.feature">the <code>.feature</code> files</a>.</p>
</div></div>
          <div class="clear"></div>
        </div>
        <div class="sub-article">
          <h2>
            <a class="permalink" href="../../../Blog/2011/06/28/lysaac_on_en_parle_pas_mais_ca_avance/index.html">Lysaac: on en parle pas mais ça avance</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Tue 28 Jun 2011,</span>
    <span class='time'>12:51 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../../comp/index.html">comp</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../fr/index.html">fr</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../index.html">lisaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../lysaac/index.html">lysaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../misc/index.html">misc</a>
    </span>
  </span>
</p>
<div class="excerpt">
  <p><a href="https://github.com/mildred/Lysaac">Lysaac</a> c'est ma réimplémentation du compilateur
<a href="http://lisaac-users.org">lisaac</a>. Jusqu'a présent, il n'y avait pas grand
chose, mais dernièrement, il y a eu des commits intéressants:</p>

<ul>
<li>les variables fonctionnent

<ul>
<li>avec des valeurs par défaut</li>
<li>on peut les lire</li>
<li>et y écrire</li>
</ul>
</li>
<li>on a aussi des BLOCKs, mais sans upvalues</li>
</ul>


<p>Ça ne paye peut être pas de mine, mais en fait, l'infrastructure du compilo est
presque complète.</p>

<p>Prochaines avancées: héritage et affichage des erreurs</p>

<p>Et peut être après: des améliorations de syntaxe (appels de slot à paramètres et
bien plus tard: opérateurs). Pour le moment, je me concentre sur les choses
basiques.</p>

<p>Si vous voulez jouer, vous pouvez. Si vous avez une erreur inattendue, créez un
scénario d'utilisation et donnez le moi (préférablement sous forme de
<a href="https://github.com/mildred/Lysaac/blob/master/features/type/struct.feature">fichier <code>.feature</code></a>).</p>
</div></div>
          <div class="clear"></div>
        </div>
        <div class="sub-article">
          <h2>
            <a class="permalink" href="../../../Blog/2012/11/28/why_lisaac_is_broken_and_why_i_no_longer_work_on_it/index.html">Why Lisaac is broken and why I no longer work on it</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Wed 28 Nov 2012,</span>
    <span class='time'>02:49 PM</span>
  </span>
  <span class='author'>
    by
    <span class='author-name'>
      Mildred Ki'Lya
    </span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../../comp/index.html">comp</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../dev/index.html">dev</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../en/index.html">en</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../index.html">lisaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../lysaac/index.html">lysaac</a>
    </span>
  </span>
</p>
<div class="excerpt">
  <h2>The overlooked problem</h2>

<p>Let me explain the reason why I think Lisaac is broken and why I stopped
working on it. The fundamental concept behind it is completely broken,
and i never could solve the problem. First, let me explain a few things
about Lisaac:</p>

<ul>
<li>It is statically typed (like Eiffel)</li>
<li>It is prototype based (like Self)</li>
</ul>


<p>It may not seem like it but those two things are mutually exclusive,
unless something is done to reconcile the two. Being statically typed
means you know the type (or a parent of the real type) at compile-time.
Being prototype based means that the type can change completely.</p>

<p>Imagine you have a <code>CUCUMBER</code> that inherit <code>VEGETABLE</code>. If at some point
during run-time, the cucumber inherit <code>SOFTWARE</code> (yes, cucumber is the
name of a software as well) you have a problem. Yet, this is not the
problem I want to talk about.</p>

<p>Lisaac solve this problem because you can only assign a child type as a
parent. In the following object:</p>

<pre><code> Section Header&#x000A;   + name := CUCUMBER;&#x000A; Section Inherit&#x000A;   + parent :VEGETABLE := ...;&#x000A;</code></pre>

<p>So, you're forbidden to assign a <code>SOFTWARE</code> in the <code>parent</code> slot because
<code>SOFTWARE</code> is not a child of <code>VEGETABLE</code>. But, you're allowed to assign
a <code>GREEN_VEGETABLE</code>. So not it becomes:</p>

<pre><code> Section Header&#x000A;   + name := CUCUMBER;&#x000A; Section Inherit&#x000A;   + parent :VEGETABLE := GREEN_VEGETABLE;&#x000A;</code></pre>

<p>Now, let's say you send a message to your cucumber, and through the
magic of inheritance, you end up in a slot of the parent. That is, you
are executing code that is located in <code>GREEN_VEGETABLE</code>. Then, you have
a problem.</p>

<pre><code> Section Header&#x000A;   + name := GREEN_VEGETABLE;&#x000A; Section Public&#x000A;   // inherited from VEGETABLE&#x000A;   - do_something &lt;- paint_it_green;&#x000A; Section Private&#x000A;   // specific to GREEN_VEGETABLE&#x000A;   - paint_it_green &lt;- ( "green".println; );&#x000A;</code></pre>

<p>In the code above, if you are executing the <code>do_something</code> slot and have
<code>SELF = CUCUMBER</code>, you can't possibly call the <code>paint_it_green</code> slot
because it does not exist in <code>CUCUMBER</code>, and the Lisaac compiler will
refuse to compile your code. To explain it another way, the type of
<code>Self</code> is not compatible with <code>GREEN_VEGETABLE</code>, and this is a problem
for this is the code we are executing. You can't easily solve this problem.</p>

<p>In the Self language, if you had a similar situation, it would work
because it is not statically typed. It would have failed to find
<code>paint_in_green</code> in the cucumber and called the parent, which would have
been a green vegetable. Somehow, the type of the cucumber would have
changed at runtime, which is incompatible with a type system that can
only compute types at compile time (and have them immutable at run time).</p>

<h2>So, I stopped working on Lisaac</h2>

<p>I tried to start up a new project, Lysaac, but got confronted to the
same problem once the compiler was mature enough to start getting into
inheritance. So I stopped again.
<a href="http://pesn.com/2012/09/02/9602175_Waking_Up_is_Hard_to_Do/index.html">Life getting in the way</a> didn't help.</p>

<h2>A new hope</h2>

<p>I tried to look into virtual machines, convincing myself that compiled
languages couldn't possibly answer such need to dynamic things in the
language. I looked at Self for the first time. I tried to build a
virtual machine that was fully concurrent. I looked at the Go language
because I know that it has nice concurrent primitives ... and I found
illumination.</p>

<p>The Go language feels like a dynamic language, but it is compiled. I
always wondered how it could implement duck typing, and I <a href="http://research.swtch.com/interfaces">found
out</a>. I also realized that the difference between a virtual machine
with a JIT compiler, and a runtime for a compiled language that included
a compiler was very narrow. Basically, nothing prevents any language
from being compiled instead of being JIT compiled. You just have to
include a compiler in the standard library.</p>

<p>Ironically, that what Common Lisp is doing.</p>

<h2>A new language</h2>

<p>I like how Go implements interfaces, and I want to do the same. In this
new language, an object is composed of :</p>

<ul>
<li>an opaque work (pointer sized)</li>
<li>a pointer to an interface</li>
</ul>


<p>An interface is a collection of pointers to functions. There is always a
pointer for the fallback implementation and a pointer for the case
operation (to case an object to a new interface).</p>

<p>I want to use a smalltalk/Io type syntax. So the following will
represent an object with one variable and one slot:</p>

<pre><code> obj := {&#x000A;   var := obj slot;&#x000A;   slot &lt;- { ... };&#x000A; }&#x000A;</code></pre>

<p>The data word of obj would be a pointer to a struct containing the
variable "var"
The interface of obj would be:</p>

<ul>
<li>a function pointer for the fallback implementation that throws an error</li>
<li>a function pointer for the "cast" operation</li>
<li>a function pointer for the "slot" slot</li>
</ul>


<p>I haven't figured out yet how to pass parameters to functions and return
objects. This kind of things will require to comply to predefined
interfaces (we need a way to tell which object type is returned by a
slot for example). Interfaces would probably be defined at compile time
and available as constants in code at run time (to be given as parameter
to the cast slot).</p>

<p>If I want to be able to compile on the fly the code, I need to include
the LLVM library. So I need to implement the language in a language that
is compiled using LLVM (so bootstraping will be easier).</p>
</div></div>
          <div class="clear"></div>
        </div>
      </div>
      <div class="page-list">
        <strong>Page:</strong>
        <ul class='page-list'>
          <li>
            <a href="../1/index.html">1</a>
          </li>
          <li>
            <strong>2</strong>
          </li>
          <li>
            <a href="../index.html">latest</a>
          </li>
        </ul>
      </div>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>
<include-file src="../../../footer.html" />
  </body>
</html>
