<!DOCTYPE html>
<html>
  <head>
    <title>A new way to update my blog - Mildred's Website</title>
    <meta charset='utf-8' />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='en, dev, website' name='keywords' />
    <meta content='' name='description' />
    <meta content='initial-scale=1.0, width=device-width' name='viewport' />
    <meta content='article' name='x-kind' />
    <link href='http://mildred.fr/Blog/2012/06/21/a_new_way_to_update_my_blog/' rel='canonical' />
    <link href='../../../../../favicon.png' rel='icon' type='image/png' />
    <link href='../../../../../favicon.png' rel='shortcut icon' type='image/png' />
    <link href='../../../../../style.css' media='screen' rel='stylesheet' type='text/css' />
    <script src='../../../../../Scripts/json/json2.js' type='text/javascript'></script>
    <script src='../../../../../Scripts/jquery.min.js' type='text/javascript'></script>
    <script src='../../../../../Scripts/comments.js' type='text/javascript'></script>
    <script src='../../../../../Scripts/local.js' type='text/javascript'></script>
    <link rel="index" href="../../../../index.html" />
  </head>
  <body>
<include-file src="../../../../../header.html" />
    <div class='main' id='content'>
      <h1>A new way to update my blog</h1>
<p class='meta'>
  <span class='date-time'>
    <span class='date'>Thu 21 Jun 2012,</span>
    <span class='time'>03:08 PM</span>
  </span>
  <span class='author'>
    by
    <span class='author-name'>
      Mildred Ki'Lya
    </span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/dev/index.html">dev</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/en/index.html">en</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/website/index.html">website</a>
    </span>
  </span>
</p>
<div class="body"><p>Hi everyone, I just developed a new way to update my blog. I am just
using my mailer (which is currently Thunderbird for a lack of a better
alternative). As you may know, I already manage my own server. I have a
nginx web server and my website is just plain old static pages generated
from markdown using my own version of webgen.</p>

<p>My code is available at two locations:</p>

<ul>
<li><a href="http://git.mildred.fr">my personal git server</a></li>
<li><a href="http://github.com/mildred/index.html">github</a></li>
</ul>


<p>I just developed a few scripts which does the following:</p>

<ul>
<li>hooked in /etc/aliases, receive e-mail from a special e-mail address.
Put this mail in an inbox directory on the server</li>
<li>another daemon (a shell script run by daemontools actually) run as the
www-data user is monitoring the inbox using inotifywait. When a mail
comes, or every 60 seconds, it process the mail using a ruby script that
convert the mail to a markdown page, and run webgen on the website. It
also commit and push the changes.</li>
</ul>


<p>And that's all.</p>

<p>The one thing I couldn't automate is the creation of the private key to
push the changes back to the git server.</p>

<p>All the code <a href="http://git.mildred.fr/?p=pub/mildred/wwwsupport.git;a=summary">is
there</a>. I
just don't know if I have a public URl for these repos :)</p></div>
      <noscript>
        <p>
          Scripts are disabled on your computer. In order to access existing
          comments and post new comments, you need to enable Javascript.
        </p>
        <p>
          Rationale: This server that hosts my website is a static server.
          In order to implement comments, a XmlHttpRequest is made on an API
          server to both retrieve the comments and post a new comment.
        </p>
      </noscript>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>
<include-file src="../../../../../footer.html" />
  </body>
</html>
