<!DOCTYPE html>
<html>
  <head>
    <title>Lysaac annotations - Mildred's Website</title>
    <meta charset='utf-8' />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='en, comp, dev, lisaac, lysaac' name='keywords' />
    <meta content='' name='description' />
    <meta content='initial-scale=1.0, width=device-width' name='viewport' />
    <meta content='article' name='x-kind' />
    <link href='http://mildred.fr/Blog/2011/04/29/lysaac_annotations/' rel='canonical' />
    <link href='../../../../../favicon.png' rel='icon' type='image/png' />
    <link href='../../../../../favicon.png' rel='shortcut icon' type='image/png' />
    <link href='../../../../../style.css' media='screen' rel='stylesheet' type='text/css' />
    <script src='../../../../../Scripts/json/json2.js' type='text/javascript'></script>
    <script src='../../../../../Scripts/jquery.min.js' type='text/javascript'></script>
    <script src='../../../../../Scripts/comments.js' type='text/javascript'></script>
    <script src='../../../../../Scripts/local.js' type='text/javascript'></script>
    <link rel="index" href="../../../../index.html" />
    <link rel="schema.dc" href="http://purl.org/dc/elements/1.1/" />
    <meta name="dc.modified" content="2016-06-06T18:31:39+02:00" />
    <meta name="dc.created" content="2011-04-29T09:40:10+02:00" />
  </head>
  <body>
<include-file src="../../../../../_header.html" />
    <div class='main' id='content'>
      <h1>Lysaac annotations</h1>
<p class='meta'>
  <span class='date-time'>
    <span class='date'>Fri 29 Apr 2011,</span>
    <span class='time'>09:40 AM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/comp/index.html">comp</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/dev/index.html">dev</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/en/index.html">en</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/lisaac/index.html">lisaac</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../../../../../tags/lysaac/index.html">lysaac</a>
    </span>
  </span>
</p>
<div class="body"><p>Because I'm using an open world assumption, I need the compiler to generate
annotations on units it compiles, so when it sees them again, it knows what it
does (or does not) internally.</p>

<p>I was looking at <a href="http://www.youtube.com/watch?v=ryfw9_-Hnb0">a LLVM video</a> this morning (VMKit precisely) and the
person talked about an interesting optimization. What if we could allocate
objects in stack instead of the heap. This would save time when creating the
object. Then we wouldn't be tempted to avoid creating new objects for fear of
memory leaks (there is not garbage collector in lisaac currently) and
performance penalty.</p>

<p>This is the same thing as aliased variables in Ada.</p>

<p>An object can be allocated on the stack if:</p>

<ul>
<li>it is not returned by the function.</li>
<li>it is not stored on the heap by the function.</li>
<li>it is not used in a called function that would store a pointer to this
object on the heap.</li>
</ul>


<p>So, when the compiler compiles a cluster, it has to generate an annotation file
containing for each argument in each code slot whether the argument is
guaranteed to remain on the stack or if it might be stored on the heap. If an
argument is guaranteed to stay on the stack, we can allocate it on the stack.
When the function will return, the only instances would be located in the
current stack frame.</p></div>
      <noscript>
        <p>
          Scripts are disabled on your computer. In order to access existing
          comments and post new comments, you need to enable Javascript.
        </p>
        <p>
          Rationale: This server that hosts my website is a static server.
          In order to implement comments, a XmlHttpRequest is made on an API
          server to both retrieve the comments and post a new comment.
        </p>
      </noscript>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>
<include-file src="../../../../../_footer.html" />
  </body>
</html>
