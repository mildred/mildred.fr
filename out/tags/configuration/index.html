<!DOCTYPE html>
<html>
  <head>
    <title>Category: configuration - Mildred's Website</title>
    <meta charset='utf-8' />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='' name='keywords' />
    <meta content='' name='description' />
    <meta content='initial-scale=1.0, width=device-width' name='viewport' />
    <meta content='tag' name='x-kind' />
    <link href='http://mildred.fr/tags/configuration/' rel='canonical' />
    <link href='../../favicon.png' rel='icon' type='image/png' />
    <link href='../../favicon.png' rel='shortcut icon' type='image/png' />
    <link href='../../style.css' media='screen' rel='stylesheet' type='text/css' />
    <link href='atom.xml' rel='alternate' title='ATOM Feed' type='application/atom+xml' />
    <link href='rss.xml' rel='alternate' title='RSS Feed' type='application/rss+xml' />
    <script src='../../Scripts/json/json2.js' type='text/javascript'></script>
    <script src='../../Scripts/jquery.min.js' type='text/javascript'></script>
    <script src='../../Scripts/comments.js' type='text/javascript'></script>
    <script src='../../Scripts/local.js' type='text/javascript'></script>
  </head>
  <body>
    <div class="header">
      <p class="access-links">
        <a href="#menu">Go to Menu</a>
        <br />
        <a href="#content">Go to Content</a>
      </p>
      <div class="left">
        <a href="../../index.html">
          <img alt="My photo" class="photo" src="../../Images/IMG_5669_square_128.jpeg"/>
        </a>
      </div>
      <div class="title">
        <h1>
          <a href="../../index.html">Mildred's Website</a>
        </h1>
      </div>
      <div class="float-right"></div>
      <div class="clear-right"></div>
      <div class="right">
        <strong>Tags:</strong>
        <ul class="tags">
          <li>
            <a class="tag" href="../cobra/index.html">cobra</a>
          </li>
          <li>
            <a class="tag" href="../comp/index.html">comp</a>
          </li>
          <li>
            <a class="tag" href="index.html">configuration</a>
          </li>
          <li>
            <a class="tag" href="../dev/index.html">dev</a>
          </li>
          <li>
            <a class="tag" href="../dream/index.html">dream</a>
          </li>
          <li>
            <a class="tag" href="../en/index.html">en</a>
          </li>
          <li>
            <a class="tag" href="../fedora/index.html">fedora</a>
          </li>
          <li>
            <a class="tag" href="../fr/index.html">fr</a>
          </li>
          <li>
            <a class="tag" href="../freedombox/index.html">freedombox</a>
          </li>
          <li>
            <a class="tag" href="../git/index.html">git</a>
          </li>
          <li>
            <a class="tag" href="../html/index.html">html</a>
          </li>
          <li>
            <a class="tag" href="../idea/index.html">idea</a>
          </li>
          <li>
            <a class="tag" href="../liens/index.html">liens</a>
          </li>
          <li>
            <a class="tag" href="../lisaac/index.html">lisaac</a>
          </li>
          <li>
            <a class="tag" href="../lysaac/index.html">lysaac</a>
          </li>
          <li>
            <a class="tag" href="../misc/index.html">misc</a>
          </li>
          <li>
            <a class="tag" href="../photos/index.html">photos</a>
          </li>
          <li>
            <a class="tag" href="../physics/index.html">physics</a>
          </li>
          <li>
            <a class="tag" href="../politique/index.html">politique</a>
          </li>
          <li>
            <a class="tag" href="../privacy/index.html">privacy</a>
          </li>
          <li>
            <a class="tag" href="../srs/index.html">srs</a>
          </li>
          <li>
            <a class="tag" href="../test/index.html">test</a>
          </li>
          <li>
            <a class="tag" href="../web/index.html">web</a>
          </li>
          <li>
            <a class="tag" href="../website/index.html">website</a>
          </li>
          <li>
            <a class="tag" href="../wwwgen/index.html">wwwgen</a>
          </li>
          <li>
            <a class="tag" href="../wwwsupport/index.html">wwwsupport</a>
          </li>
        </ul>
      </div>
      <div class="content">
        <div class="links" id="menu">
          <ul>
            <li>
              <a href="../../index.html">Home</a>
            </li>
            <li>
              <a href="../../Blog/index.html">Blog</a>
            </li>
            <li>
              <a href="//survie.mildred.fr">Survie</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="clear"></div>
    </div>
    <div class="leftcol">
      <img alt="My avatar" class="photo" src="../../Images/all128.jpeg"/>
      <hr/>
      <p>GoogleTalk, Jabber, XMPP address:
      <br /><strong><a href="xmpp:mildred&#64;jabber.fr">mildred&#64;jabber.fr</a></strong><!--&nbsp;<img src="http://presence.jabberfr.org/2dc519ffec76a836c2f2c2f66ac38291/image-dcraven.png" alt=""/><br /><em><script type="text/javascript" src="http://presence.jabberfr.org/2dc519ffec76a836c2f2c2f66ac38291/message_js.js"></script></em>-->
      </p>
      <hr/>
      <p>
        <a href="../../gpg_key.txt">GPG Public Key</a>
        <br />
        <span style="font-size: 0.8em">
          (Fingerprint 197C A7E6 645B 4299 6D37 684B 6F9D A8D6 9A7D 2E2B)
        </span>
      </p>
    </div>
    <div class='main' id='content'>
      <h1>Category: configuration</h1>
      <p>Articles from 1 to 1</p>
      <div class="article-list">
        <div class="sub-article">
          <h2>
            <a class="permalink" href="../../Blog/2011/06/28/home_directory_package_manager/index.html">Home directory package manager</a>
          </h2>
          <div><p class='meta'>
  <span class='date-time'>
    <span class='date'>Tue 28 Jun 2011,</span>
    <span class='time'>12:17 PM</span>
  </span>
  <span class='tags'>
    <span class='tag'>
      <a class="tag" href="../comp/index.html">comp</a>
    </span>
    <span class='tag'>
      <a class="tag" href="index.html">configuration</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../en/index.html">en</a>
    </span>
    <span class='tag'>
      <a class="tag" href="../misc/index.html">misc</a>
    </span>
  </span>
</p>
<div class="excerpt">
  <p>I always wanted to manage the files in my home directory. Generally, it's a
complete mess and I wanted to get things right and understand the files I had.</p>

<p>At first, I just created a simple shell script that maintained symbolic links of
the dotfiles and dordirs of my homedirs to <code>.local/config</code>, sort of early XDG
configuration directory. I also changed my .bashrc and later .zshrc to point to
files in <code>.local/etc/profile.d</code>. The shell script was reading a database in
<code>.local/config/database.sh</code> that contained the link information in the form.</p>

<p>The script did the following for each file declared:</p>

<ul>
<li>if the file existed in the homedir but not in the database directory, it was
simply moved and a link was created in its place.</li>
<li>if the file existed at both places, tell there is a conflict.</li>
<li>if the file existed in the database directory but not in the homedir, create
the link</li>
</ul>


<p>The database looks like:</p>

<pre><code>link ".bashrc" "bashrc"&#x000A;link ".zshrc"  "zshrc"&#x000A;&#x000A;# First file in home directory&#x000A;# Second file in .local/config&#x000A;</code></pre>

<p>My script just defined a function <code>link</code> and sourced the database. But links
were not easy to construct in shell. So later, I decided to rewrite it in Tcl,
simply because the syntax is compatible (I love the Tcl syntax for that) and
because of the wonderful <a href="http://www.tcl.tk/man/tcl8.5/TclCmd/file.htm">file</a> command.</p>

<p>Later, I improved the script that was then called <code>fixdir</code> to list which files
were not managed, and display them. So I could either delete those files
(because I don't care about them) or integrate them in the database. The script
gained a <code>clean</code> command to automatically remove files declared as noisy.</p>

<p>Now, I have a slightly different problem. I have now different computers which
do not have all the same configuration. At first, I synchronized everything and
just used the hostname in the database to get different links depending on the
machine. But now, with my computer at work, I will not synchronize all the
personal configurations. i have to get to a modular approach.</p>

<p>And this script did not help me in tracking what programs I installed in
<code>~/.local/{bin,share,lib}</code>. For this, I wanted something like <a href="http://www.gnu.org/software/stow/index.html">stow</a>. I
tried using stow, but it failed with a conflict. Then I tried using
<a href="https://github.com/docwhat/homedir">homedir</a>. I just didn't like it because it created an ugly <code>~/bin</code>
instead of <code>~/.local/bin</code>.</p>

<p>Then I realized my <code>fixdir</code> script looks much like <code>homedir</code> already, and I
patched it up to make it better. And there it is.</p>

<p><a href="https://github.com/mildred/fixdir">The current version of fixdir is on github.</a></p>

<p>Let me copy the README file:</p>

<h2>What is it?</h2>

<p>This is my homedir package manager. Written first in shell then translated in
tcl. Originally, this was just to maintain a set of symbolic links from my home
directory to a directory where all important comfig files were stored. Then I
decided to make it a package manager.</p>

<h2>How to install it?</h2>

<pre><code>git clone git://github.com/mildred/fixdir.git fixdir&#x000A;fixdir_dir="$(pwd)/fixdir"&#x000A;cd&#x000A;"$fixdir_dir/fixdir" install "$fixdir_dir/hpkg.tcl"&#x000A;</code></pre>

<p><code>fixdir</code> is installed in <code>~/.local/bin</code>. Make sure it is in your <code>$PATH</code>.</p>

<h2>How does it work</h2>

<p><code>fixdir</code> works better when you are in your target directory (homedir)</p>

<p>Invoke one action with a database file. The database file is a tcl script that
contain all files and directories that should be linked.</p>

<h2>What else can it do?</h2>

<p><code>fixdir unknown</code> list all files not manages by fixdir in the current directory</p>

<p><code>fixdir clean</code> remove files declared as noisy</p>

<h2>Bugs</h2>

<ul>
<li>fixdir list doesn't work when pwd != target directory</li>
</ul>
</div></div>
          <div class="clear"></div>
        </div>
      </div>
      <div class="page-list">
        <strong>Page:</strong>
        <ul class='page-list'>
          <li>
            <a href="index.html">1</a>
          </li>
          <li>
            <strong>latest</strong>
          </li>
        </ul>
      </div>
      <div class="clear"></div>
    </div>
    <div class="clear"></div>
    <div class="footer">
      <hr/>
      <p>E-mail:
        <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#37;&#54;&#68;&#37;&#54;&#57;&#37;&#54;&#67;&#37;&#54;&#52;&#37;&#55;&#50;&#37;&#54;&#53;&#37;&#54;&#52;&#37;&#50;&#68;&#37;&#55;&#48;&#37;&#55;&#53;&#37;&#54;&#50;&#37;&#50;&#68;&#37;&#51;&#49;&#37;&#52;&#48;&#37;&#54;&#68;&#37;&#54;&#57;&#37;&#54;&#67;&#37;&#54;&#52;&#37;&#55;&#50;&#37;&#54;&#53;&#37;&#54;&#52;&#37;&#50;&#69;&#37;&#54;&#54;&#37;&#55;&#50;">&#109;&#105;&#108;&#100;&#114;&#101;&#100;&#45;&#112;&#117;&#98;&#45;&#49;&#64;&#109;&#105;&#108;&#100;&#114;&#101;&#100;&#46;&#102;&#114;</a>
      </p>
      <p>Mildred's Website: <a href="http://mildred.fr">http://mildred.fr</a>.
      I try to have <a href="http://www.w3.org/Provider/Style/URI">cools URI that don't change</a>.</p>
    </div>
  </body>
</html>
